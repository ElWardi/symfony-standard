#!/bin/sh

CURRENT_DIR="$(pwd -P)"
ROOT_DIR="$(dirname ${CURRENT_DIR}/..)"
VENDORS_DIR="${ROOT_DIR}/vendor"
ARCHIVE_DIR="${ROOT_DIR}"

if test $# -eq 0
    then
        echo ''
        echo ',---.  ,---.   .-'\'''\''-.  ,---.   .--. ______         ,-----.    .-------.     '
        echo '|   /  |   | .'\''_ _   \ |    \  |  ||    _ `'\'''\''.   .'\''  .-,  '\''.  |  _ _   \    '
        echo '|  |   |  .'\''/ ( ` )   '\''|  ,  \ |  || _ | ) _  \ / ,-.|  \ _ \ | ( '\'' )  |    '
        echo '|  | _ |  |. (_ o _)  ||  |\_ \|  ||( '\'''\''_'\''  ) |;  \  '\''_ /  | :|(_ o _) /    '
        echo '|  _( )_  ||  (_,_)___||  _( )_\  || . (_) `. ||  _`,/ \ _/  || (_,_).'\'' __  '
        echo '\ (_ o._) /'\''  \   .---.| (_ o _)  ||(_    ._) '\'': (  '\''\_/ \   ;|  |\ \  |  | '
        echo ' \ (_,_) /  \  `-'\''    /|  (_,_)\  ||  (_.\.'\'' /  \ `"/  \  ) / |  | \ `'\''   / '
        echo '  \     /    \       / |  |    |  ||       .'\''    '\''. \_/``".'\''  |  |  \    /  '
        echo '   `---`      `'\''-..-'\''  '\''--'\''    '\''--'\'''\''-----'\''`        '\''-----'\''    '\'''\''-'\''   `'\''-'\''   '
        echo ''
        echo 'Vendor : Manipulates vendors as archive'
        echo ''
        echo 'Usage:'
        echo '  command'
        echo ''
        echo 'Available commands:'
        echo '  compress         Compress vendors as archive'
        echo '  extract          Extract vendors from archive'
        echo ''

# Compress
elif [[ $1 == "compress" ]]
    then
        echo "Compress vendors into ${ARCHIVE_DIR}/vendor.tar.gz"
        $(cd ${VENDORS_DIR}; tar -zcf ${ARCHIVE_DIR}/vendor.tar.gz *)

# Extract
elif [[ $1 == "extract" ]]
    then
        echo "Removing existing vendors..."
        $(rm -rf ${VENDORS_DIR}/*)
        echo "Extract vendors into ${VENDORS_DIR} ..."
        $(mkdir -p ${VENDORS_DIR}; cd ${VENDORS_DIR}; tar -zxf ${ARCHIVE_DIR}/vendor.tar.gz)
fi
